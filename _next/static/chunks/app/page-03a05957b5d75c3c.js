(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9334:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var o=r(5155),n=r(2115);let i=e=>{let t=e.trim().match(/^([^[\\\]s]+)/);return t?t[0].trim():e.trim()};var l=r(4629);let s=e=>{let{data:t,highlightedNodeId:r,onBlankClick:i}=e,s=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;let o=null==(e=s.current)?void 0:e.getEchartsInstance();if(o&&(o.dispatchAction({type:"downplay",seriesIndex:0}),r)){let e=t.nodes.findIndex(e=>e.id===r);-1!==e&&o.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:e})}},[r,t.nodes]),(0,n.useEffect)(()=>{var e;let t=null==(e=s.current)?void 0:e.getEchartsInstance();if(!t)return;let r=e=>{"series"===e.componentType&&e.data||i()};return t.on("click",r),()=>{t.off("click",r)}},[i]);let a={tooltip:{},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{myZoomIn:{show:!0,title:"Zoom In",icon:"path://M10.5,0 C16.3,0 21,4.7 21,10.5 C21,16.3 16.3,21 10.5,21 C4.7,21 0,16.3 0,10.5 C0,4.7 4.7,0 10.5,0 Z M10.5,2 C5.8,2 2,5.8 2,10.5 C2,15.2 5.8,19 10.5,19 C15.2,19 19,15.2 19,10.5 C19,5.8 15.2,2 10.5,2 Z M10,5 L11,5 L11,10 L16,10 L16,11 L11,11 L11,16 L10,16 L10,11 L5,11 L5,10 L10,10 L10,5 Z",onclick:()=>{var e;let t=null==(e=s.current)?void 0:e.getEchartsInstance();if(t){let e=t.getOption(),r=1.2*e.series[0].zoom;t.setOption({series:[{...e.series[0],zoom:r}]})}}},myZoomOut:{show:!0,title:"Zoom Out",icon:"path://M10.5,0 C16.3,0 21,4.7 21,10.5 C21,16.3 16.3,21 10.5,21 C4.7,21 0,16.3 0,10.5 C0,4.7 4.7,0 10.5,0 Z M10.5,2 C5.8,2 2,5.8 2,10.5 C2,15.2 5.8,19 10.5,19 C15.2,19 19,15.2 19,10.5 C19,5.8 15.2,2 10.5,2 Z M5,10 L16,10 L16,11 L5,11 L5,10 Z",onclick:()=>{var e;let t=null==(e=s.current)?void 0:e.getEchartsInstance();if(t){let e=t.getOption(),r=e.series[0].zoom/1.2;t.setOption({series:[{...e.series[0],zoom:r}]})}}},restore:{show:!0,title:"Reset"},saveAsImage:{show:!0}},iconStyle:{borderColor:"#666",borderWidth:1},emphasis:{iconStyle:{borderColor:"#3e98ff"}}},legend:[{data:t.categories.map(e=>e.name)}],color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],series:[{type:"graph",layout:"force",data:t.nodes,edges:t.links,categories:t.categories,roam:!0,label:{show:!0,position:"right",formatter:"{b}"},edgeSymbol:["none","arrow"],edgeSymbolSize:10,edgeLabel:{show:!0,formatter:e=>{var t;return(null==(t=e.data.label)?void 0:t.formatter)||""},backgroundColor:"#fff",padding:[2,4],borderRadius:4},force:{repulsion:100,edgeLength:50},emphasis:{focus:"adjacency",lineStyle:{width:10}}}]};return(0,o.jsx)(l.A,{ref:s,option:a,style:{height:"100%",width:"100%"}})};function a(){let[e,t]=(0,n.useState)(null),[r,l]=(0,n.useState)(""),[a,d]=(0,n.useState)(""),[c,p]=(0,n.useState)([]),[u,x]=(0,n.useState)(null),[h,g]=(0,n.useState)(""),[f,m]=(0,n.useState)(!1),y=(e,r)=>{let o=e.match(/```mermaid\n([\s\S]*?)\n```/),n=o&&o[1]?o[1]:e;try{let e=(e=>{let t=e.trim().split("\n"),r=new Map,o=[],n=[{name:"Default"}],l={},s=0,a=!1,d=/^\s*(.+?)\s*(?:--\s*(.*?)\s*-->|-->(?:\|(.*?)\|)?)\s*(.+)\s*$/,c=/([^[\\\]s]+)\[([^\]]+)]/g,p=/^\s*subgraph\s+([A-Z])\[(.+)]/,u=/^\s*end/;for(let e of t){let t=e.trim().match(p);if(t){let e=t[1],r=t[2];l[e]||(n.push({name:r}),l[e]=n.length-1)}}for(let e of t){let t,o=e.trim();if(!o.startsWith("subgraph"))for(c.lastIndex=0;null!==(t=c.exec(o));){let e=t[1].trim(),o=t[2].trim();r.set(e,{name:o,categoryIndex:0})}}for(let e of t){let t=e.trim();if(t.startsWith("graph")||t.startsWith("%%"))continue;let n=t.match(p);if(n){s=l[n[1]]||0,a=!0;continue}if(u.test(t)){a=!1,s=0;continue}let c=t.match(d);if(c){let[e,t,n,l,d]=c,p=i(t),u=i(d);r.has(p)||r.set(p,{name:p,categoryIndex:0}),r.has(u)||r.set(u,{name:u,categoryIndex:0}),a&&(0===r.get(p).categoryIndex&&(r.get(p).categoryIndex=s),0===r.get(u).categoryIndex&&(r.get(u).categoryIndex=s));let x={source:p,target:u},h=n||l;h&&(x.label={show:!0,formatter:h.trim().replace(/^["'](.*)["']$/,"$1")}),o.push(x)}else if(a){let e=i(t);r.has(e)&&0===r.get(e).categoryIndex&&(r.get(e).categoryIndex=s)}}return{nodes:Array.from(r.entries()).map(e=>{let[t,r]=e;return{id:t,name:r.name,symbolSize:40,category:r.categoryIndex,label:{show:!0,formatter:r.name}}}),links:o,categories:n}})(n);t(e),g(r),l("")}catch(e){l("Failed to parse Mermaid code. Please check the syntax."),t(null),console.error(e)}};(0,n.useEffect)(()=>{let e="liquid-cooling-supply-chain";fetch("".concat("/VizFlow_nextjs-echarts-mermaid-viewer","/").concat(e,".md")).then(e=>e.text()).then(t=>y(t,e)).catch(e=>{console.error("Failed to load default file:",e),l("Could not load default visualization.")})},[]);let b=e=>{x(e),d(""),p([])},v={display:"inline-block",padding:"8px 16px",fontSize:"14px",fontWeight:"bold",color:"white",background:"linear-gradient(to right, #3b82f6, #8b5cf6)",border:"none",borderRadius:"8px",cursor:"pointer",transition:"transform 0.2s ease"};return(0,o.jsxs)("main",{style:{fontFamily:"sans-serif",height:"100vh",display:"flex",flexDirection:"column"},children:[(0,o.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 25px",borderBottom:"1px solid #eee",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",position:"relative",zIndex:10},children:[(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("h1",{style:{fontSize:"28px",fontWeight:"bold",background:"linear-gradient(to right, #3b82f6, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:0},children:"VizFlow"}),(0,o.jsx)("p",{style:{margin:"5px 0 0",color:"#777",fontSize:"14px"},children:"Mermaid Graph Visualization"})]}),h&&(0,o.jsx)("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",fontSize:"20px",fontWeight:"bold",background:"linear-gradient(to right, #60a5fa, #a78bfa)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:h}),(0,o.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"25px"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,o.jsx)("label",{htmlFor:"file-upload",style:v,onMouseOver:e=>e.currentTarget.style.transform="scale(1.05)",onMouseOut:e=>e.currentTarget.style.transform="scale(1)",children:"Upload File"}),(0,o.jsxs)("div",{style:{position:"relative",display:"inline-block",marginLeft:"8px",cursor:"pointer"},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[(0,o.jsx)("span",{style:{fontSize:"16px",color:"#999",border:"2px solid #999",borderRadius:"50%",width:"20px",height:"20px",display:"inline-flex",justifyContent:"center",alignItems:"center"},children:"?"}),(0,o.jsxs)("div",{style:{visibility:f?"visible":"hidden",opacity:+!!f,width:"320px",backgroundColor:"#555",color:"#fff",textAlign:"left",borderRadius:"6px",padding:"12px",position:"absolute",zIndex:20,top:"150%",left:"50%",marginLeft:"-160px",transition:"opacity 0.3s",lineHeight:"1.5"},children:[(0,o.jsx)("b",{children:"File Requirements:"}),(0,o.jsx)("br",{}),"- Format: Markdown (.md)",(0,o.jsx)("br",{}),"- Must contain a ```mermaid block.",(0,o.jsx)("br",{}),'- Supports: `graph TD`, node labels (ID[Name]), first-level `subgraph`, and links (`--\x3e`, --"label"--\x3e).',(0,o.jsx)("hr",{style:{margin:"8px 0",borderColor:"#888"}}),(0,o.jsx)("b",{children:"文件要求:"}),(0,o.jsx)("br",{}),"- 格式: Markdown (.md)",(0,o.jsx)("br",{}),"- 必须包含 ```mermaid 代码块。",(0,o.jsx)("br",{}),'- 支持: `graph TD`, 节点标签 (ID[名称]), 第一层 `subgraph`, 以及链接 (`--\x3e`, --"标签"--\x3e).']})]}),(0,o.jsx)("input",{id:"file-upload",type:"file",accept:".md",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(!r)return;let o=r.name.replace(/\.[^/.]+$/,""),n=new FileReader;n.onload=e=>{var t;y(null==(t=e.target)?void 0:t.result,o)},n.readAsText(r)},style:{display:"none"}}),r&&(0,o.jsx)("p",{style:{color:"red",margin:0,fontSize:"14px"},children:r})]}),e&&(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)("input",{type:"text",value:a,onChange:t=>{let r=t.target.value;d(r),r&&e?p(e.nodes.filter(e=>e.name.toLowerCase().startsWith(r.toLowerCase()))):p([])},onKeyDown:e=>{"Enter"===e.key&&c.length>0&&b(c[0].id)},placeholder:"Search nodes...",style:{padding:"8px 12px",fontSize:"14px",borderRadius:"6px 0 0 6px",border:"1px solid #ccc",borderRight:"none"}}),(0,o.jsx)("button",{onClick:()=>c.length>0&&b(c[0].id),style:{padding:"8px 10px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"0 6px 6px 0",background:"#f0f0f0",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#e0e0e0",onMouseOut:e=>e.currentTarget.style.backgroundColor="#f0f0f0",children:"\uD83D\uDD0D"})]}),c.length>0&&(0,o.jsx)("ul",{style:{listStyle:"none",padding:"5px 0",margin:"5px 0 0",backgroundColor:"white",border:"1px solid #ccc",borderRadius:"6px",position:"absolute",width:"100%",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:20},children:c.map(e=>(0,o.jsx)("li",{onClick:()=>b(e.id),style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f0f0f0",onMouseOut:e=>e.currentTarget.style.backgroundColor="white",children:e.name},e.id))})]})]})]}),(0,o.jsx)("div",{style:{flex:1,overflow:"hidden",position:"relative"},children:e?(0,o.jsx)(s,{data:e,highlightedNodeId:u,onBlankClick:()=>{x(null)}}):(0,o.jsx)("div",{style:{textAlign:"center",paddingTop:"15%",color:"#888"},children:(0,o.jsx)("h2",{style:{fontSize:"22px",fontWeight:500},children:"Loading Visualization..."})})}),(0,o.jsxs)("footer",{style:{flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 25px",borderTop:"1px solid #eee",backgroundColor:"white",color:"#555",fontSize:"14px"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:"Mr. Er Xuanhe"}),(0,o.jsx)("a",{href:"mailto:xuanhe.er@siemens.com",style:{color:"#3b82f6",textDecoration:"none",margin:"0 10px"},onMouseOver:e=>e.currentTarget.style.textDecoration="underline",onMouseOut:e=>e.currentTarget.style.textDecoration="none",children:"xuanhe.er@siemens.com"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{color:"#999",cursor:"not-allowed",margin:"0 10px"},title:"Coming soon",children:"Privacy Policy"}),(0,o.jsx)("span",{style:{color:"#999",cursor:"not-allowed",margin:"0 10px"},title:"Coming soon",children:"Terms of Use"})]}),(0,o.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},style:{...v,padding:"8px 15px",fontSize:"14px"},onMouseOver:e=>e.currentTarget.style.transform="scale(1.05)",onMouseOut:e=>e.currentTarget.style.transform="scale(1)",children:"Back to Top"})]})]})}},9630:(e,t,r)=>{Promise.resolve().then(r.bind(r,9334))}},e=>{e.O(0,[629,441,255,358],()=>e(e.s=9630)),_N_E=e.O()}]);